

% 
function h = SolveIntegral_Cons ( D_1_nm_s, D_min_s, D_max_s, AmEx_crop_nm_s, AmEx_crop_squared_nm_s, Ch_p_number,  epsilon_nm_s)

 h = @tris;
 
	
% 
	function Integrand_raman= tris(x)


	
		
		%%%%%%%%%% AUTOMATIC  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		
 		syms s x_nm;
	
		x_nm=x*1e9;
 		
  		s=((2.*x-D_min_s-D_max_s)./(D_max_s-D_min_s));
		

		PPP=s;
		SSS=x;
		SSS=1;

		
		if Ch_p_number==1
			QQQ=SSS;
		elseif Ch_p_number==2
			QQQ=PPP;
		else 
			if Ch_p_number>2
			for ccc=3:1:Ch_p_number
				QQQ=2.*s.*PPP-SSS;
				SSS=PPP;
				PPP=QQQ;
			end
			end
		end
		
	%%%%%%%%%% AUTOMATIC ENDS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
	if x_nm(1)==D_1_nm_s
		x_nm(1)=x_nm(1)+epsilon_nm_s;
	end

	
	if Ch_p_number==1
		Integrand_raman=((x_nm-D_1_nm_s-AmEx_crop_nm_s)./(sqrt(AmEx_crop_squared_nm_s-(x_nm-D_1_nm_s-AmEx_crop_nm_s).^(2)))); 
	else
		%tttt=(x_nm-D_1_nm_s-AmEx_crop_nm_s).^(2);
		Integrand_raman=QQQ.*((x_nm-D_1_nm_s-AmEx_crop_nm_s)./(sqrt(AmEx_crop_squared_nm_s-(x_nm-D_1_nm_s-AmEx_crop_nm_s).^(2))));   
	end
 	end

end

